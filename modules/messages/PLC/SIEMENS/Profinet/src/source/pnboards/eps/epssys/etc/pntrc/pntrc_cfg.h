#ifndef PNTRC_CFG_H
#define PNTRC_CFG_H

#ifdef __cplusplus                       /* If C++ - compiler: Use C linkage */
extern "C"
{
#endif

/*****************************************************************************/
/*  Copyright (C) 2015 Siemens Aktiengesellschaft. All rights reserved.      */
/*****************************************************************************/
/*  This program is protected by German copyright law and international      */
/*  treaties. The use of this software including but not limited to its      */
/*  Source Code is subject to restrictions as agreed in the license          */
/*  agreement between you and Siemens.                                       */
/*  Copying or distribution is not allowed unless expressly permitted        */
/*  according to your license agreement with Siemens.                        */
/*****************************************************************************/
/*                                                                           */
/*  P r o j e c t         &P: PROFINET IO Runtime Software              :P&  */
/*                                                                           */
/*  P a c k a g e         &W: PROFINET IO Runtime Software              :W&  */
/*                                                                           */
/*  C o m p o n e n t     &C: PNTRC (PN Trace)                          :C&  */
/*                                                                           */
/*  F i l e               &F: pntrc_cfg.h.txt                           :F&  */
/*                                                                           */
/*  V e r s i o n         &V: BC_PNRUN_P05.04.00.00_00.02.00.40         :V&  */
/*                                                                           */
/*  D a t e  (YYYY-MM-DD) &D: 2015-07-28                                :D&  */
/*                                                                           */
/*****************************************************************************/
/*                                                                           */
/*  D e s c r i p t i o n :                                                  */
/*                                                                           */
/*  System integration of LSA-component PNTRC                                */
/*                                                                           */
/*****************************************************************************/

/*
 * included by "pntrc_inc.h"
 */

/*===========================================================================*/
/*                                 defines                                   */
/*===========================================================================*/

/*---------------------------------------------------------------------------*/
/* Max number of HD(HardwareDevices) [1..N] for one LD instance              */
/*---------------------------------------------------------------------------*/
#define PNTRC_CFG_MAX_LOWER_CPU_CNT    4
#define PNTRC_SEND_SYNC_SCALER	      30		/*Multiplicator for generating time sync interval from
												  thread service interval, if service interval is 100 ms,
												  then with a scaler of 30 the time sync interval is 3 s.*/

#define PNTRC_SYSTEM_ID_TYPE           LSA_UINT32

#if ( PSI_CFG_USE_PNTRC == 0 )
#define PNTRC_CFG_SUBSYSTEMS_DEFINED_EXTERNAL
#endif

/*===========================================================================*/
/*                             compiler-switches                             */
/*===========================================================================*/

#define PNTRC_DEBUG                    PSI_DEBUG

/*===========================================================================*/
/*                                  types                                    */
/*===========================================================================*/

//Sys handles for user, may not be altered by PNTRC. This handle is generated by the user and passed to PNTRC. PNTRC uses this handle, when it calls user functions.
typedef LSA_UINT32 PNTRC_SYS_HANDLE_TYPE;
typedef PNTRC_SYS_HANDLE_TYPE* PNTRC_SYS_HANDLE_PTR_TYPE;

//Sys handle for lower CPUs, the boardnr is used for this
typedef LSA_UINT32 PNTRC_SYS_HANDLE_LOWER_TYPE;
typedef PNTRC_SYS_HANDLE_LOWER_TYPE* PNTRC_SYS_HANDLE_LOWER_PTR_TYPE;

typedef struct pntrc_init_trace_timer_tag
{
	LSA_UINT32 Resolution;
} PNTRC_INIT_TRACE_TIMER_TYPE;
typedef PNTRC_INIT_TRACE_TIMER_TYPE* PNTRC_INIT_TRACE_TIMER_PTR_TYPE;

/*===========================================================================*/
/*                                  macros                                    */
/*===========================================================================*/

LSA_VOID pntrc_startstop (LSA_INT start, LSA_VOID* pShmHw);

#define PNTRC_OFFSET_OF(s,m) (LSA_UINT32)((LSA_UINT32*)&(((s*)0x0)->m))

#define PNTRC_RQB_SET_OPCODE(rb_, val_)          LSA_RQB_SET_OPCODE(rb_, val_)
#define PNTRC_RQB_GET_OPCODE(rb_)                LSA_RQB_GET_OPCODE(rb_)

#define PNTRC_RQB_SET_RESPONSE(rb_, val_)        LSA_RQB_SET_RESPONSE(rb_, val_)
#define PNTRC_RQB_GET_RESPONSE(rb_)              LSA_RQB_GET_RESPONSE(rb_)

#define PNTRC_RQB_GET_USER_ID(rb_)				 LSA_RQB_GET_USER_ID(rb_)

/*------------------------------------------------------------------------------
// enable / disable PNTRC_ASSERT
//----------------------------------------------------------------------------*/

#if PNTRC_DEBUG

extern int pntrc_semicolon_missing; /* see pntrc_cfg.c */

	/* check for condition: internal programming error */
# define PNTRC_ASSERT(cond) \
	if (! (cond)) { PNTRC_FATAL (0); } else pntrc_semicolon_missing = 1

#else

	/* no more programming error exists :-) */
# define PNTRC_ASSERT(cond)

#endif

/*------------------------------------------------------------------------------
// interface to BTRACE
//----------------------------------------------------------------------------*/

#ifndef PNTRC_FILE_SYSTEM_EXTENSION
# define PNTRC_FILE_SYSTEM_EXTENSION(module_id_)
#endif


/*------------------------------------------------------------------------------
// interface to LSA trace
//	0 .. no LSA trace
//	1 .. LSA trace [default]
//	2 .. LSA index trace
//----------------------------------------------------------------------------*/

#ifndef PNTRC_CFG_TRACE_MODE
# error "PNTRC_CFG_TRACE_MODE not defined"
#endif


/*----------------------------------------------------------------------------*/

#ifdef __cplusplus  /* If C++ - compiler: End of C linkage */
}
#endif

/*****************************************************************************/
/*  Copyright (C) 2015 Siemens Aktiengesellschaft. All rights reserved.      */
/*****************************************************************************/
#endif  /* of PNTRC_CFG_H */
